var ticker="https://www.bitstamp.net/api/ticker/",transactions="https://www.bitstamp.net/api/transactions/";window.addEventListener("load",function(){function t(t){for(var e in t)if($("#"+e).length>-1){if("timestamp"===e){var n=new Date(1e3*t[e]);t[e]=n.getFullDate()}$("#"+e).html(t[e])}}function e(t){var e=[],n=0;for(var a in t){var r=t[a];r.price=Math.floor(r.price),r.amount=parseFloat(r.amount),r.price!=n?(e.push({date:r.date,amount:r.amount,price:r.price}),n=r.price):e[e.length-1].amount+=r.amount}if(e.length>-1)for(var i=document.getElementById("transTable"),o=0;o<e.length;o++){var c=i.insertRow(o),s=c.insertCell(0),l=c.insertCell(1),u=c.insertCell(2);s.innerHTML=e[o].amount.toFixed(2),s.className="col-2",l.innerHTML=$.timeago(new Date(1e3*e[o].date).toISOString()),l.className="col-3",u.innerHTML=e[o].price,u.className="col-2"}}$.ajax({type:"GET",url:ticker,cache:!1}).done(function(e){t(e)}).fail(function(){console.log("Ticker failed!")}),$.ajax({type:"GET",url:transactions,cache:!1}).done(function(t){e(t)}).fail(function(){console.log("Transactions failed!")})}),Date.prototype.getFullDate=function(){return this.getFormattedMonth()+" "+this.getDate()+", "+this.getFullYear()+" "+this.toLocaleTimeString()},Date.prototype.getFormattedMonth=function(){switch(this.getMonth()){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:return"Jan"}};