var ticker="https://www.bitstamp.net/api/ticker/",transactions="https://www.bitstamp.net/api/transactions/";window.addEventListener("load",function(){function t(t){for(var e in t)if($("#"+e).length>-1){if("timestamp"===e){var a=new Date(1e3*t[e]);t[e]=a.getFullDate()}else isNaN(parseFloat(t[e]))||(t[e]=parseFloat(t[e]).toFixed(2));$("#"+e).html(t[e])}}function e(t){var e=[],a=0;for(var n in t){var r=t[n];r.price=Math.floor(r.price),r.amount=parseFloat(r.amount),r.price!=a?(e.push({date:r.date,amount:r.amount,price:r.price}),a=r.price):e[e.length-1].amount+=r.amount}if(e.length>-1)for(var i=document.getElementById("transTable"),o=0;o<e.length;o++){var s=i.insertRow(o),c=s.insertCell(0),l=s.insertCell(1),u=s.insertCell(2);c.innerHTML="<span class='tableNumLeft'>"+e[o].amount.toFixed(2)+"</span>",c.className="col-2",l.innerHTML=$.timeago(new Date(1e3*e[o].date).toISOString()),l.className="col-3",u.innerHTML="<span class='tableNumRight'>"+e[o].price+"</span>",u.className="col-2"}}$.ajax({type:"GET",url:ticker,cache:!1}).done(function(e){t(e)}).fail(function(){console.log("Ticker failed!")}),$.ajax({type:"GET",url:transactions,cache:!1}).done(function(t){e(t)}).fail(function(){console.log("Transactions failed!")})}),Date.prototype.getFullDate=function(){return this.getFormattedMonth()+" "+this.getDate()+", "+this.getFullYear()+" "+this.toLocaleTimeString()},Date.prototype.getFormattedMonth=function(){switch(this.getMonth()){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:return"Jan"}};